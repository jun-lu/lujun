MX.extend(MX.ui,{ok:function(b,c){this.tip({context:b,okbtn:!1,cancelbtn:!1,type:"success",timeout:c||3E3,title:base_lang.tip}).ui.close.focus()},alert:function(b,c){this.tip({context:b,cancelbtn:!1,type:"notice",callback:c,title:base_lang.tip}).ui.ok.focus()},confirm:function(b,c){this.tip({context:b,closebtn:!1,type:"notice",callback:function(b){c&&c(b=="ok"?!0:!1)},title:base_lang.tip}).ui.ok.focus()},tip:function(){function b(a){this.option={title:base_lang.tip,context:"hello world",callback:function(){},
timeout:0,okbtn:!0,cancelbtn:!0,closebtn:!0,type:"notice"};$.extend(this.option,a);this.init()}var c=base_lang.ok,d=base_lang.cancel,e='<div class="moxian-ui-tip">\t\t\t\t<div class="ui-tip-wrapper">\t\t\t\t\t<div class="ui-tip-main">\t\t\t\t\t\t<div class="ui-tip-title">\t\t\t\t\t\t\t<h1><%=title%></h1>\t\t\t\t\t\t\t<%if(closebtn){%>\t\t\t\t\t\t\t<input type="button" class="ui-btn-close" title="'+base_lang.close+'" />\t\t\t\t\t\t\t<%}%>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="ui-tip-context">\t\t\t\t\t\t\t<p class="p">\t\t\t\t\t\t\t\t<span class="ui-tip-icon ui-tip-<%=type%>"></span><span><%=context%></span>\t\t\t\t\t\t\t</p>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="ui-tip-btn">\t\t\t\t\t\t\t<%if(okbtn){%>\t\t\t\t\t\t\t\t<input type="button" title="'+
c+'" class="ui-btn-ok" value="'+c+'" />\t\t\t\t\t\t\t<%}%>\t\t\t\t\t\t\t<%if(cancelbtn){%>\t\t\t\t\t\t\t\t<input type="button" title="'+d+'" class="ui-btn-cancel" value="'+d+'" />\t\t\t\t\t\t\t<%}%>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="ui-tip-bg"></div>\t\t\t</div>';b.prototype={init:function(){var a=Common.tmpl(e,this.option),a=$("<div></div>").append(a);this.ui={wrapper:a.find(".moxian-ui-tip"),title:a.find(".ui-tip-title"),close:a.find(".ui-btn-close"),ok:a.find(".ui-btn-ok"),
cancel:a.find(".ui-btn-cancel")};$(document.body).append(a.find(".moxian-ui-tip"));this.regEvent();this.option.timeout&&this.setTimeout(this.option.timeout);(new MX.kit.DragElement({dragElement:this.ui.title,moveElement:this.ui.wrapper,isRange:!1,isResize:!1,offsetTop:0})).init();this.updatePos()},regEvent:function(){function a(c){c.keyCode==27&&(b.close("close"),$(window).unbind("keyup",a))}var b=this;this.ui.close.click(function(){b.close("close")});this.ui.ok.click(function(){b.close("ok")});this.ui.cancel.click(function(){b.close("cancel")});
$(document).keyup(a)},close:function(a){this.ui.wrapper.remove();this.option.callback(a)},updatePos:function(){var a=$(window).height(),b=$(window).width();this.setPos((a-this.ui.wrapper.height())/2,(b-this.ui.wrapper.width())/2)},setTimeout:function(a){var b=this;setTimeout(function(){b.close("auto")},a)},setPos:function(a,b){this.ui.wrapper.css({top:a+"px",left:b+"px"})}};return function(a){return new b(a)}}()});
